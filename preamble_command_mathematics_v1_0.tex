%# -*- coding: utf-8 -*-

% preamble_command_mathematics_v1_0.tex

% ---------- macro definition ----------
% ----- equation setting -----
% \everymath{\displaystyle}

% ----- command -----
\newcommand{\les}{\leqslant}
\newcommand{\ges}{\geqslant}
\newcommand{\degree}{^{\circ}}
\newcommand{\circA}{\overset{\circ}{\mathrm{A}}}
\newcommand{\dageq}{\stackrel{\dag}{ = }}
\newcommand{\ddageq}{\stackrel{\ddag}{ = }}
\newcommand{\dbdageq}{\stackrel{\dbdag}{ = }}
\newcommand{\stareq}{\stackrel{*}{ = }}
\newcommand{\dagiff}{\stackrel{\dag}{\iff}}
\newcommand{\ddagiff}{\stackrel{\ddag}{\iff}}
\newcommand{\dagimp}{\stackrel{\dag}{\implies}}
\newcommand{\ddagimp}{\stackrel{\ddag}{\implies}}
\newcommand{\tensor}[1]{\overleftrightarrow{#1}}
% \renewcommand\tensor[1]{\overset{\scriptscriptstyle\leftrightarrow}{#1}}
\renewcommand{\tensor}[1]{\overset{\scriptstyle\leftrightarrow}{#1}}
\newcommand{\by}{\leftarrow}
\newcommand{\quot}[2]{#1\mathbin{/}\!\!#2}

\newcommand{\join}{\Join}

% \renewcommand\pi{\piup}
\newcommand{\PI}{\uppi}
% \renewcommand\pi{\uppi}
% \renewcommand\pi{\text{\textpi}}
% \renewcommand\pi{\textrm{\greektext p}}

\newcommand{\nimplies}{\centernot\implies}
\newcommand{\nimpliedby}{\centernot\impliedby}

\renewcommand{\Re}{\mathrm{Re}\,}
\renewcommand{\Im}{\mathrm{Im}\,}
\newcommand{\const}{\mathrm{Const.}}
\newcommand{\sym}{\mathrm{sym}}
\newcommand{\cyc}{\mathrm{cyc}}
\newcommand{\ii}{\,\mathrm{i}}
\newcommand{\jj}{\,\mathrm{j}}

\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\dif}{d\!}
\DeclareMathOperator{\diff}{d}
\DeclareMathOperator{\trans}{T}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\grad}{\mathbf{grad}}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\sinc}{sinc}
\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\ex}{E}
\DeclareMathOperator{\var}{Var}
\DeclareMathOperator{\argmin}{arg\,min}
\DeclareMathOperator{\argmax}{arg\,max}
\DeclareMathOperator{\softmax}{softmax}
\DeclareMathOperator{\arccot}{arccot}
\DeclareMathOperator{\st}{s.t.}
\DeclareMathOperator{\iid}{i.i.d.}
\DeclareMathOperator{\Exp}{Exp}
\DeclareMathOperator{\Poi}{Poi}

\renewcommand{\parallel}{/\!\!/}

\newcommand{\bR}{\bm{\mathcal{R}}}

\newcommand{\Alpha}{\mathrm{A}}
\newcommand{\Beta}{\mathrm{B}}
\newcommand{\Epsilon}{\mathrm{E}}

\newcommand{\rA}{\mathrm{A}}
\newcommand{\rB}{\mathrm{B}}
\newcommand{\rC}{\mathrm{C}}
\newcommand{\rD}{\mathrm{D}}
\newcommand{\rE}{\mathrm{E}}
\newcommand{\rF}{\mathrm{F}}
\newcommand{\rG}{\mathrm{G}}
\newcommand{\rH}{\mathrm{H}}
\newcommand{\rI}{\mathrm{I}}
\newcommand{\rJ}{\mathrm{J}}
\newcommand{\rK}{\mathrm{K}}
\newcommand{\rL}{\mathrm{L}}
\newcommand{\rM}{\mathrm{M}}
\newcommand{\rN}{\mathrm{N}}
\newcommand{\rO}{\mathrm{O}}
\newcommand{\rP}{\mathrm{P}}
\newcommand{\rQ}{\mathrm{Q}}
\newcommand{\rR}{\mathrm{R}}
\newcommand{\rS}{\mathrm{S}}
\newcommand{\rT}{\mathrm{T}}
\newcommand{\rU}{\mathrm{U}}
\newcommand{\rV}{\mathrm{V}}
\newcommand{\rW}{\mathrm{W}}
\newcommand{\rX}{\mathrm{X}}
\newcommand{\rY}{\mathrm{Y}}
\newcommand{\rZ}{\mathrm{Z}}
\newcommand{\ra}{\mathrm{a}}
\newcommand{\rb}{\mathrm{b}}
\newcommand{\rc}{\mathrm{c}}
\newcommand{\rd}{\mathrm{d}}
\newcommand{\re}{\mathrm{e}}
\newcommand{\rf}{\mathrm{f}}
\newcommand{\rg}{\mathrm{g}}
\newcommand{\rh}{\mathrm{h}}
\newcommand{\ri}{\mathrm{i}}
\newcommand{\rj}{\mathrm{j}}
\newcommand{\rk}{\mathrm{k}}
\newcommand{\rl}{\mathrm{l}}
\renewcommand{\rm}{\mathrm{m}}
\newcommand{\rn}{\mathrm{n}}
\newcommand{\ro}{\mathrm{o}}
\newcommand{\rp}{\mathrm{p}}
\renewcommand{\rq}{\mathrm{q}}
\newcommand{\rr}{\mathrm{r}}
\newcommand{\rs}{\mathrm{s}}
\newcommand{\rt}{\mathrm{t}}
\newcommand{\ru}{\mathrm{u}}
\newcommand{\rv}{\mathrm{v}}
\newcommand{\rw}{\mathrm{w}}
\newcommand{\rx}{\mathrm{x}}
\newcommand{\ry}{\mathrm{y}}
\newcommand{\rz}{\mathrm{z}}

\newcommand{\0}{\bm{0}}
\newcommand{\1}{\bm{1}}
\newcommand{\A}{\bm{A}}
\newcommand{\B}{\bm{B}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\D}{\bm{D}}
\newcommand{\E}{\bm{E}}
\newcommand{\F}{\bm{F}}
\newcommand{\G}{\bm{G}}
\renewcommand{\H}{\bm{H}}
\newcommand{\I}{\bm{I}}
\newcommand{\J}{\bm{J}}
\newcommand{\K}{\mathbb{K}}
\renewcommand{\L}{\bm{L}}
\newcommand{\M}{\bm{M}}
\newcommand{\N}{\mathbb{N}}
\renewcommand{\O}{\bm{O}}
\renewcommand{\P}{\bm{P}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\renewcommand{\S}{\bm{S}}
\newcommand{\T}{\bm{T}}
\newcommand{\U}{\bm{U}}
\newcommand{\V}{\bm{V}}
\newcommand{\W}{\bm{W}}
\newcommand{\X}{\bm{X}}
\newcommand{\Y}{\bm{Y}}
\newcommand{\Z}{\mathbb{Z}}
\renewcommand{\a}{\bm{a}}
\renewcommand{\b}{\bm{b}}
\renewcommand{\c}{\bm{c}}
\renewcommand{\d}{\bm{d}}
\newcommand{\e}{\mathrm{e}}
\newcommand{\f}{\bm{f}}
\newcommand{\g}{\bm{g}}
\newcommand{\h}{\bm{h}}
\renewcommand{\i}{\mathrm{i}}
\renewcommand{\j}{\bm{j}}
\renewcommand{\k}{\bm{k}}
\renewcommand{\l}{\bm{l}}
\newcommand{\m}{\bm{m}}
\newcommand{\n}{\bm{n}}
\renewcommand{\o}{\bm{o}}
\newcommand{\p}{\bm{p}}
\newcommand{\q}{\bm{q}}
\renewcommand\r{\bm{r}}
\newcommand{\br}{\bm{r}}
\newcommand{\s}{\bm{s}}
\renewcommand{\t}{\bm{t}}
\renewcommand{\u}{\bm{u}}
\renewcommand{\v}{\bm{v}}
\newcommand{\w}{\bm{w}}
\newcommand{\x}{\bm{x}}
\newcommand{\y}{\bm{y}}
\newcommand{\z}{\bm{z}}

\newcommand{\balpha}{\bm{\alpha}}
\newcommand{\bbeta}{\bm{\beta}}
\newcommand{\bchi}{\bm{\chi}}
\newcommand{\bdelta}{\bm{\delta}}
\newcommand{\bvarepsilon}{\bm{\varepsilon}}
\newcommand{\bphi}{\bm{\phi}}
\newcommand{\bvarphi}{\bm{\varphi}}
\newcommand{\bgamma}{\bm{\gamma}}
\newcommand{\bmeta}{\bm{\eta}}
\newcommand{\biota}{\bm{\iota}}
\newcommand{\bkappa}{\bm{\kappa}}
\newcommand{\blambda}{\bm{\lambda}}
\newcommand{\bvarLambda}{\bm{\varLambda}}
\newcommand{\bmu}{\bm{\mu}}
\newcommand{\bnu}{\bm{\nu}}
\newcommand{\bpi}{\bm{\pi}}
\newcommand{\bvarpi}{\bm{\varpi}}
\newcommand{\btheta}{\bm{\theta}}
\newcommand{\bvartheta}{\bm{\vartheta}}
\newcommand{\brho}{\bm{\rho}}
\newcommand{\bsigma}{\bm{\sigma}}
\newcommand{\bvarsigma}{\bm{\varsigma}}
\newcommand{\btau}{\bm{\tau}}
\newcommand{\bupsilon}{\bm{\upsilon}}
\newcommand{\bomega}{\bm{\omega}}
\newcommand{\bxi}{\bm{\xi}}
\newcommand{\bpsi}{\bm{\psi}}
\newcommand{\bzeta}{\bm{\zeta}}
\newcommand{\bAlpha}{\bm{\Alpha}}
\newcommand{\bBeta}{\bm{\Beta}}
\newcommand{\bChi}{\bm{\Chi}}
\newcommand{\bDelta}{\bm{\Delta}}
\newcommand{\bEpsilon}{\bm{\Epsilon}}
\newcommand{\bPhi}{\bm{\Phi}}
\newcommand{\bGamma}{\bm{\Gamma}}
\newcommand{\bEta}{\bm{\Eta}}
\newcommand{\bIota}{\bm{\Iota}}
\newcommand{\bKappa}{\bm{\Kappa}}
\newcommand{\bLambda}{\bm{\Lambda}}
\newcommand{\bMu}{\bm{\Mu}}
\newcommand{\bNu}{\bm{\Nu}}
\newcommand{\bPi}{\bm{\Pi}}
\newcommand{\bTheta}{\bm{\Theta}}
\newcommand{\bRho}{\bm{\Rho}}
\newcommand{\bSigma}{\bm{\Sigma}}
\newcommand{\bvarSigma}{\bm{\varSigma}}
\newcommand{\bTau}{\bm{\Tau}}
\newcommand{\bUpsilon}{\bm{\Upsilon}}
\newcommand{\bOmega}{\bm{\Omega}}
\newcommand{\bXi}{\bm{\Xi}}
\newcommand{\bPsi}{\bm{\Psi}}
\newcommand{\bZeta}{\bm{\Zeta}}
\newcommand{\ve}{\varepsilon}
\newcommand{\laplace}{\Delta}
\newcommand{\Ln}{\mathop{\mathrm{Ln}}\nolimits}
\newcommand{\Arg}{\mathop{\mathrm{Arg}}\nolimits}
\newcommand{\supp}{\mathop{\mathrm{supp}}\nolimits}
\newcommand{\Aut}{\mathop{\mathrm{Aut}}\nolimits}
\ExplSyntaxOn

% 定义 \parfrac 宏，支持星号、阶数、括号组和逗号变量
\NewDocumentCommand{\parfrac}{ s O{1} m m } { \group_begin: \IfBooleanT {#1} { \cs_set:Npn
    \__parfrac_fractype: { \flatfrac } } \frac { \__parfrac_process_numerator:nn
    {#2}{#3} } { \__parfrac_process_denominator:nn {#2}{#4} } \group_end: }   % 分母处理（传入阶数）% 分子处理% 星号用 \flatfrac

% 处理分子（带阶数）
\cs_new_protected:Nn \__parfrac_process_numerator:nn
{
  \int_compare:nNnTF {#1} = {1}
    { \partial #2 } { \partial^{#1} #2 } }

% 处理分母（自动识别括号组/逗号变量，并应用阶数）
\cs_new_protected:Nn \__parfrac_process_denominator:nn
{
\tl_set:Nn \l_tmpa_tl {#2}
% 判断是否为括号组（如 (x,y)）
\tl_if_in:NnTF \l_tmpa_tl {(}
{
\partial \l_tmpa_tl \int_compare:nNnT {#1} > {1} { ^{#1} } } { \seq_set_split:Nnn
\l_tmpa_seq { , } {#2} \int_compare:nNnTF {#1} = {1} { \seq_map_inline:Nn
\l_tmpa_seq {   % 添加阶数% 保留整体括号
  \partial ##1 } } { \seq_map_inline:Nn \l_tmpa_seq {  % 单阶数
  \partial ##1 ^{#1} } } } } % 多变量各自加阶数

\ExplSyntaxOff

\DeclareDocumentCommand\pdv{ s o m g g d() }
{
  \IfBooleanTF{#1}
  {\let\fractype\flatfrac}
  {\let\fractype\frac}
  \IfNoValueTF{#4}
  {
    \IfNoValueTF{#6}
    {\fractype{\partial \IfNoValueTF{#2}{}{^{#2}}}{\partial #3\IfNoValueTF{#2}{}{^{#2}}}} {\fractype{\partial \IfNoValueTF{#2}{}{^{#2}}}{\partial #3\IfNoValueTF{#2}{}{^{#2}}} \argopen(#6\argclose)} } { \IfNoValueTF{#5}
    {\fractype{\partial \IfNoValueTF{#2}{}{^{#2}} #3}{\partial #4\IfNoValueTF{#2}{}{^{#2}}}} {\fractype{\partial^2 #3}{\partial #4 \partial #5}} } }

\usepackage{esint}

% 重定义\eqref{}
\renewcommand{\eqref}[1]{\textup{式(\ref{#1}})}  % 输出类似 "Eq. (1)" 的格式
\newcommand{\thmref}[1]{\textup{定理~\ref{#1}}~}  % 输出类似 "Eq. (1)" 的格式
\renewcommand{\theoremautorefname}{定理}
\renewcommand{\figureautorefname}{图}

\usepackage{tkz-euclide}
\usepackage{tasks}

% 圆弧命令\wideparen
\DeclareSymbolFont{ugmL}{OMX}{mdugm}{m}{n}
\DeclareMathAccent{\wideparen}{\mathord}{ugmL}{"F3}

\let\oldexists\exists
\renewcommand{\exists}{\oldexists\,}
\newcommand{\llfloor}{\left\lfloor}
\newcommand{\rrfloor}{\right\rfloor}
\newcommand{\llceil}{\left\lceil}
\newcommand{\rrceil}{\right\rceil}

\usepackage{enumitem}
\newenvironment{enum}{\begin{enumerate}[label=\textbf{\arabic*.},ref=\arabic*,left=0cm]}
    {
  \end{enumerate}}

\newenvironment{eenum}{\begin{enumerate}[label=(\arabic*),left=0.85cm]}
    {
  \end{enumerate}}
\newenvironment{enuma}{\begin{enumerate}[label=(\arabic*),leftmargin=0.71cm]}
    {
  \end{enumerate}}
\newcommand\quan[1]{
  \tikz[baseline=(a.base)]\node(a)[inner sep=0.5pt,draw,circle]{$#1$};
}
\newcommand\closure[1]{%
  {}\mkern1mu\overline{\mkern-1mu#1}
}
\renewcommand\bar{\closure}

\newenvironment{xiti}{\par%
  \centerline{\textbf{习\quad 题\quad \thesection}}
  \begin{enum}
    }{\end{enum}}


\usepackage{tasks}